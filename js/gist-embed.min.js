!function(e){function t(e){var t,i,s=[];if("number"==typeof e)s.push(e);else{i=e.split(",");for(var n=0;n<i.length;n++)if(t=i[n].split("-"),2===t.length)for(var l=parseInt(t[0],10);l<=t[1];l++)s.push(l);else 1===t.length&&s.push(parseInt(t[0],10))}return s}e.fn.gist=function(){return this.each(function(){var i,s,n,l,a,r,h,d=e(this),o={};return d.css("display","block"),i=d.data("gist-id")||"",n=d.data("gist-file"),r=d.data("gist-hide-footer")===!0,h=d.data("gist-hide-line-numbers")===!0,l=d.data("gist-line"),a=d.data("gist-highlight-line"),n&&(o.file=n),i?(s="https://gist.github.com/"+i+".json",d.html("Loading gist "+s+(o.file?", file: "+o.file:"")+"..."),void e.ajax({url:s,data:o,dataType:"jsonp",timeout:1e5,success:function(i){var n,o,f,g,u;i&&i.div?(i.stylesheet&&0!==i.stylesheet.indexOf("http")&&(0!==i.stylesheet.indexOf("/")&&(i.stylesheet="/"+i.stylesheet),i.stylesheet="https://gist.github.com"+i.stylesheet),i.stylesheet&&0===e('link[href="'+i.stylesheet+'"]').length&&(n=document.createElement("link"),o=document.getElementsByTagName("head")[0],n.type="text/css",n.rel="stylesheet",n.href=i.stylesheet,o.insertBefore(n,o.firstChild)),u=e(i.div),u.removeAttr("id"),d.html("").append(u),a&&(g=t(a),u.find("td.line-data").css({width:"100%"}),u.find(".line").each(function(t){-1!==e.inArray(t+1,g)&&e(this).css({"background-color":"rgb(255, 255, 204)"})})),l&&(f=t(l),u.find(".line").each(function(t){-1===e.inArray(t+1,f)&&e(this).remove()}),u.find(".line-number").each(function(t){-1===e.inArray(t+1,f)&&e(this).remove()})),r&&u.find(".gist-meta").remove(),h&&u.find(".line-numbers").remove()):d.html("Failed loading gist "+s)},error:function(e,t){d.html("Failed loading gist "+s+": "+t)}})):!1})},e(function(){e("[data-gist-id]").gist()})}(jQuery);

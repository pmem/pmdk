# Run all tests on PMEM.
#
# This workflow is run on 'self-hosted' runners.
name: PMEM tests

on:
  workflow_dispatch:
  schedule:
    # run this job at 18:00 UTC every day
    - cron:  '0 18 * * *'

jobs:

  # Test the default build with force-enabled Valgrind tooling for (persistent)
  # memory error detection.
  Memory:
    uses: ./.github/workflows/pmem_test_matrix.yml
    with:
      force_enable: '["pmemcheck", "memcheck"]'
      valgrind: 1

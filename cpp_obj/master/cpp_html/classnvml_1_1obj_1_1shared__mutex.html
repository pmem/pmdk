<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NVML C++ bindings: nvml::obj::shared_mutex Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>nvml</b>::<b>obj</b>::<a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a></div>
<h1>nvml::obj::shared_mutex Class Reference</h1><!-- doxytag: class="nvml::obj::shared_mutex" -->Persistent memory resident <a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a> implementation.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="shared__mutex_8hpp-source.html">libpmemobj++/shared_mutex.hpp</a>&gt;</code>
<p>
<a href="classnvml_1_1obj_1_1shared__mutex-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1b425c4245ce01626815492c4e50f9bb"></a><!-- doxytag: member="nvml::obj::shared_mutex::native_handle_type" ref="1b425c4245ce01626815492c4e50f9bb" args="" -->
typedef PMEMrwlock *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#1b425c4245ce01626815492c4e50f9bb">native_handle_type</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation defined handle to the native type. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8795935c13291eb0c5a2a88996b26482"></a><!-- doxytag: member="nvml::obj::shared_mutex::shared_mutex" ref="8795935c13291eb0c5a2a88996b26482" args="() noexcept" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#8795935c13291eb0c5a2a88996b26482">shared_mutex</a> () noexcept</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defaulted constructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2c4b5215294924160db7a1bff57a29b7"></a><!-- doxytag: member="nvml::obj::shared_mutex::~shared_mutex" ref="2c4b5215294924160db7a1bff57a29b7" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#2c4b5215294924160db7a1bff57a29b7">~shared_mutex</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defaulted destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#6131028475d263e3da0aec96983aea1f">lock</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock the mutex for exclusive access.  <a href="#6131028475d263e3da0aec96983aea1f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#c94514d4b370ba5880783c5ffb22c8fc">lock_shared</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock the mutex for shared access.  <a href="#c94514d4b370ba5880783c5ffb22c8fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#c5bab6d4f35f3d239e19ef4d576173cb">try_lock</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to lock the mutex for exclusive access, returns regardless if the lock succeeds.  <a href="#c5bab6d4f35f3d239e19ef4d576173cb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#2f6b8f808c7c122f22f6bd7d944a4321">try_lock_shared</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to lock the mutex for shared access, returns regardless if the lock succeeds.  <a href="#2f6b8f808c7c122f22f6bd7d944a4321"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#4b09e0da36f1b7a106bda54b05f13163">unlock</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlocks the mutex.  <a href="#4b09e0da36f1b7a106bda54b05f13163"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#693cc843b33ddd59ee5f0519e9175e6c">unlock_shared</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlocks the mutex.  <a href="#693cc843b33ddd59ee5f0519e9175e6c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#1b425c4245ce01626815492c4e50f9bb">native_handle_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#c775fc2eeb168bc95899728de5512605">native_handle</a> () noexcept</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Access a native handle to this shared mutex.  <a href="#c775fc2eeb168bc95899728de5512605"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum pobj_tx_lock&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#2e7ec0156570945b2e74f73a93c9a034">lock_type</a> () const noexcept</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The type of lock needed for the transaction API.  <a href="#2e7ec0156570945b2e74f73a93c9a034"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5037cff90140c35c9f6af7b1ed3f2830"></a><!-- doxytag: member="nvml::obj::shared_mutex::operator=" ref="5037cff90140c35c9f6af7b1ed3f2830" args="(const shared_mutex &amp;)" -->
<a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#5037cff90140c35c9f6af7b1ed3f2830">operator=</a> (const <a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a> &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deleted assignment operator. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3b4230b4a180315d417e658a593b982"></a><!-- doxytag: member="nvml::obj::shared_mutex::shared_mutex" ref="a3b4230b4a180315d417e658a593b982" args="(const shared_mutex &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#a3b4230b4a180315d417e658a593b982">shared_mutex</a> (const <a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a> &amp;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deleted copy constructor. <br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="88b4cb039c00dfc11f06fef20b7df66a"></a><!-- doxytag: member="nvml::obj::shared_mutex::plock" ref="88b4cb039c00dfc11f06fef20b7df66a" args="" -->
PMEMrwlock&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#88b4cb039c00dfc11f06fef20b7df66a">plock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A POSIX style PMEM-resident <a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a>. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Persistent memory resident <a class="el" href="classnvml_1_1obj_1_1shared__mutex.html">shared_mutex</a> implementation. 
<p>
This class is an implementation of a PMEM-resident share_mutex which mimics in behavior the C++11 std::mutex. This class satisfies all requirements of the SharedMutex and StandardLayoutType concepts. The typical usage would be:  doc_snippets/mutex.cpp shared_mutex_example 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="6131028475d263e3da0aec96983aea1f"></a><!-- doxytag: member="nvml::obj::shared_mutex::lock" ref="6131028475d263e3da0aec96983aea1f" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void nvml::obj::shared_mutex::lock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lock the mutex for exclusive access. 
<p>
If a different thread already locked this mutex, the calling thread will block. If the same thread tries to lock a mutex it already owns, either in exclusive or shared mode, the behavior is undefined.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classnvml_1_1lock__error.html">lock_error</a></em>&nbsp;</td><td>when an error occurs, this includes all system related errors with the underlying implementation of the mutex. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="c94514d4b370ba5880783c5ffb22c8fc"></a><!-- doxytag: member="nvml::obj::shared_mutex::lock_shared" ref="c94514d4b370ba5880783c5ffb22c8fc" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void nvml::obj::shared_mutex::lock_shared           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lock the mutex for shared access. 
<p>
If a different thread already locked this mutex for exclusive access, the calling thread will block. If it was locked for shared access by a different thread, the lock will succeed.<p>
The mutex can be locked for shared access multiple times by the same thread. If so, the same number of unlocks must be made to unlock the mutex.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classnvml_1_1lock__error.html">lock_error</a></em>&nbsp;</td><td>when an error occurs, this includes all system related errors with the underlying implementation of the mutex. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="2e7ec0156570945b2e74f73a93c9a034"></a><!-- doxytag: member="nvml::obj::shared_mutex::lock_type" ref="2e7ec0156570945b2e74f73a93c9a034" args="() const noexcept" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum pobj_tx_lock nvml::obj::shared_mutex::lock_type           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The type of lock needed for the transaction API. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>TX_LOCK_RWLOCK </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="c775fc2eeb168bc95899728de5512605"></a><!-- doxytag: member="nvml::obj::shared_mutex::native_handle" ref="c775fc2eeb168bc95899728de5512605" args="() noexcept" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classnvml_1_1obj_1_1shared__mutex.html#1b425c4245ce01626815492c4e50f9bb">native_handle_type</a> nvml::obj::shared_mutex::native_handle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Access a native handle to this shared mutex. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to PMEMmutex. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="c5bab6d4f35f3d239e19ef4d576173cb"></a><!-- doxytag: member="nvml::obj::shared_mutex::try_lock" ref="c5bab6d4f35f3d239e19ef4d576173cb" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool nvml::obj::shared_mutex::try_lock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Try to lock the mutex for exclusive access, returns regardless if the lock succeeds. 
<p>
If the same thread tries to lock a mutex it already owns either in exclusive or shared mode, the behavior is undefined.<p>
<dl compact><dt><b>Returns:</b></dt><dd>`true` on successful lock acquisition, `false` otherwise.</dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classnvml_1_1lock__error.html">lock_error</a></em>&nbsp;</td><td>when an error occurs, this includes all system related errors with the underlying implementation of the mutex. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="2f6b8f808c7c122f22f6bd7d944a4321"></a><!-- doxytag: member="nvml::obj::shared_mutex::try_lock_shared" ref="2f6b8f808c7c122f22f6bd7d944a4321" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool nvml::obj::shared_mutex::try_lock_shared           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Try to lock the mutex for shared access, returns regardless if the lock succeeds. 
<p>
The mutex can be locked for shared access multiple times by the same thread. If so, the same number of unlocks must be made to unlock the mutex. If the calling thread already owns the mutex in any mode, the behavior is undefined.<p>
<dl compact><dt><b>Returns:</b></dt><dd>`false` if a different thread already locked the mutex for exclusive access, `true` otherwise.</dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classnvml_1_1lock__error.html">lock_error</a></em>&nbsp;</td><td>when an error occurs, this includes all system related errors with the underlying implementation of the mutex. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="4b09e0da36f1b7a106bda54b05f13163"></a><!-- doxytag: member="nvml::obj::shared_mutex::unlock" ref="4b09e0da36f1b7a106bda54b05f13163" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void nvml::obj::shared_mutex::unlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unlocks the mutex. 
<p>
The mutex must be locked for exclusive access by the calling thread, otherwise results in undefined behavior.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classnvml_1_1lock__error.html">lock_error</a></em>&nbsp;</td><td>when an error occurs, this includes all system related errors with the underlying implementation of the mutex. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="693cc843b33ddd59ee5f0519e9175e6c"></a><!-- doxytag: member="nvml::obj::shared_mutex::unlock_shared" ref="693cc843b33ddd59ee5f0519e9175e6c" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void nvml::obj::shared_mutex::unlock_shared           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unlocks the mutex. 
<p>
The mutex must be locked for shared access by the calling thread, otherwise results in undefined behavior.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classnvml_1_1lock__error.html">lock_error</a></em>&nbsp;</td><td>when an error occurs, this includes all system related errors with the underlying implementation of the mutex. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>nvml/src/include/libpmemobj++/<a class="el" href="shared__mutex_8hpp-source.html">shared_mutex.hpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Sep 6 08:21:33 2016 for NVML C++ bindings by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
